
# WireGuard Ansible Role

Ansible Role for automaticaly setting up a WireGuard server and Creating a local Tunnel Configuration file to be used with a Client

## Requirements

### Controller

 - `ansible >= [core 2.18.1]`
 - `python >= 3.12.3`
 - `jinja >= 3.1.4`

### Host

-  `Ubuntu >= 22.04 64 Bit`
-  `python >= 3.10.12`

## Usage

1. Clone this repository and remove the .git folder if you want to use it another repository
1. Modify the  variables under `ansible/group_vars/all`, `ansible/group_vars/local.yml`, `ansible/group_vars/wireguard.yml` and `ansible/inventory.yml` with your appropriate values.
2. Run `ansible-playbook -i inventory.yml main.yml` inside the ansible folder
3. Open your WireGuard client and load the Tunnel configuration file from the `wireguard_local_conf_file_dest` path you defined in `ansible/group_vars/local.yml`
4.  Enjoy!

## Variables

### `ansible/group_vars/all.yml`
- `wireguard_local_ip`: IP address for the WireGuard interface in your local machine (I.e 10.0.0.2/32)
- `wireguard_local_pubkey`: Public key for the WireGuard interface in your local machine
### `ansible/group_vars/local.yml`

 - `wireguard_local_privatekey`: Private Key generated by WireGuard for the interface in your local machine
 - `wireguard_local_dns`: DNS servers that will be used by the WireGuard interface
 - `wireguard_local_allowed_ips`: IPs that the VPN will route traffic to and from
 - `wireguard_local_conf_file_dest`: Path for the Tunnel Configuration file in your local machine

### `ansible/groups_vars/wireguard.yml`

- `ansible_ssh_private_key_file`: Path to the private ssh key to login into the server
- `wireguard_server_vpn_address`: Ip address for the WireGuard interface in the server (I.e 10.0.0.1/24)

## Note
If you decide to use this repository in another,  **do not** store the private key for the interface inside the repository. Instead, store the private key in a enviroment variable and use jinja2 functions to load it into the vars file
